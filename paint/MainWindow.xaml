<Window x:Class="SimplePaint.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Simple Paint" Height="720" Width="1080">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <ToolBar Grid.Row="0">
            <ComboBox x:Name="toolComboBox" Width="100" SelectionChanged="ToolComboBox_SelectionChanged">
                <ComboBoxItem Content="Карандаш" IsSelected="True"/>
                <ComboBoxItem Content="Линия"/>
                <ComboBoxItem Content="Прямоугольник"/>
                <ComboBoxItem Content="Эллипс"/>
                <ComboBoxItem Content="Ластик"/>
            </ComboBox>

            <Separator/>

            <TextBlock Text="Цвет:" VerticalAlignment="Center" Margin="5,0"/>
            <ItemsControl x:Name="colorPalette" VerticalAlignment="Center">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel Orientation="Horizontal"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Rectangle Width="20" Height="20" Margin="2" 
                                   Stroke="DarkGray" StrokeThickness="1"
                                   Cursor="Hand"
                                   MouseDown="ColorRectangle_MouseDown">
                            <Rectangle.Fill>
                                <SolidColorBrush Color="{Binding}"/>
                            </Rectangle.Fill>
                        </Rectangle>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>

            <Separator/>

            <Slider x:Name="brushSizeSlider" Width="100" Minimum="1" Maximum="50" Value="5"/>
            <TextBlock Text="Размер:" VerticalAlignment="Center"/>
            <TextBlock x:Name="brushSizeText" Text="5" VerticalAlignment="Center" Width="30"/>

            <Separator/>

            <Button Content="Очистить" Click="ClearButton_Click"/>
            <Button Content="Сохранить" Click="SaveButton_Click"/>
        </ToolBar>

        <Canvas x:Name="drawingCanvas" Grid.Row="1" Background="White" 
                MouseMove="DrawingCanvas_MouseMove"
                MouseLeftButtonDown="DrawingCanvas_MouseLeftButtonDown"
                MouseLeftButtonUp="DrawingCanvas_MouseLeftButtonUp"/>

        <StatusBar Grid.Row="2">
            <StatusBarItem>
                <TextBlock x:Name="statusText" Text="Готов к рисованию"/>
            </StatusBarItem>
            <StatusBarItem>
                <TextBlock x:Name="coordinatesText" Text="X: 0, Y: 0"/>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>